<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ffffff"/>
  <meta name="description" content="Reset EO database (old & new) safely. DuaSelipar Dev Hub.">
  <title>üóëÔ∏è Reset EO Database | DuaSelipar Tools</title>

  <!-- Tailwind (no Bootstrap/AOS) -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Tailwind config: dark mode via class + Inter font
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Inter','ui-sans-serif','system-ui','Segoe UI','Roboto','Helvetica','Arial'] }
        }
      }
    }
  </script>

  <!-- Prevent theme flash -->
  <script>
    (function(){
      try{
        const t = localStorage.getItem('theme');
        if (t === 'dark') document.documentElement.classList.add('dark');
        else if (t === 'light') document.documentElement.classList.remove('dark');
        else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){
          document.documentElement.classList.add('dark');
        }
      }catch(e){}
    })();
  </script>
</head>
<body class="bg-white text-slate-800 dark:bg-slate-950 dark:text-slate-100 antialiased">

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-white/70 dark:bg-slate-950/70 backdrop-blur border-b border-slate-200/70 dark:border-slate-800/70">
    <div class="mx-auto max-w-[1080px] w-full px-4 md:px-6 lg:px-8">
      <div class="h-14 flex items-center justify-between">
        <h1 class="text-base md:text-lg font-extrabold tracking-tight">DuaSelipar Tools</h1>
        <div class="flex items-center gap-2">
          <a href="/" class="hidden sm:inline-block text-sm font-semibold px-3 py-2 rounded-lg hover:bg-slate-950/5 dark:hover:bg-white/5">Home</a>
          <!-- Theme toggle -->
          <button id="themeToggle" class="inline-flex items-center justify-center h-9 w-9 rounded-lg ring-1 ring-slate-200 dark:ring-slate-800 hover:bg-slate-950/5 dark:hover:bg-white/5" title="Toggle theme">
            <!-- sun (shows in dark) -->
            <svg class="h-5 w-5 hidden dark:block" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="4"></circle>
              <path d="M12 2v2m0 16v2m10-10h-2M4 12H2m16.95 6.95-1.41-1.41M6.46 6.46 5.05 5.05m13.49 0-1.41 1.41M6.46 17.54l-1.41 1.41"/>
            </svg>
            <!-- moon (shows in light) -->
            <svg class="h-5 w-5 dark:hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Hero -->
  <section class="border-b border-slate-200 dark:border-slate-800">
    <div class="mx-auto max-w-[1080px] w-full px-4 md:px-6 lg:px-8">
      <div class="py-10 text-center">
        <div class="mx-auto mb-4 inline-flex h-14 w-14 items-center justify-center rounded-full bg-red-500/10 text-red-600 dark:text-red-400 ring-1 ring-red-500/20">
          üóëÔ∏è
        </div>
        <h2 class="text-2xl md:text-3xl font-bold tracking-tight">Reset EO Database</h2>
        <p class="mt-2 text-slate-600 dark:text-slate-400">
          <b>Danger Zone:</b> These scripts will <span class="text-red-600 dark:text-red-400 font-semibold">WIPE</span> player & account data. <br class="hidden md:block">
          <span class="text-red-600 dark:text-red-400 font-semibold">Backup your database before running!</span>
        </p>
      </div>
    </div>
  </section>

  <main class="mx-auto max-w-[1080px] w-full px-4 md:px-6 lg:px-8 py-6 pb-16">

    <!-- Info alert -->
    <div class="rounded-xl border border-amber-200/80 dark:border-amber-800/50 bg-amber-50/60 dark:bg-amber-900/20 text-amber-900 dark:text-amber-100 px-4 py-3 text-sm">
      <b>Warning:</b> Make sure <u>all tables in this script exist</u> in your database before running. If any table does not exist, execution will stop.<br>
      <span class="text-red-700 dark:text-red-300"><b>Tip:</b> Always backup your database first!</span>
    </div>

    <!-- Old DB Section -->
    <section class="mt-8 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-5">
      <h3 class="text-lg font-semibold border-l-4 border-sky-500 pl-3">üíæ Old Database Structure</h3>
      <p class="mt-2 text-sm text-slate-600 dark:text-slate-400">Classic EO database (2014/older). Includes auto-increment reset for <code class="font-mono">account</code> & <code class="font-mono">cq_user</code>.</p>

      <!-- Code box -->
      <div class="relative mt-4">
        <!-- Copy badge -->
        <span id="copied-old" class="pointer-events-none absolute top-2 right-24 hidden rounded-md bg-emerald-600 text-white text-xs px-2 py-1">Copied!</span>
        <!-- Copy button -->
        <button class="absolute top-2 right-2 text-xs rounded-md border border-slate-700/70 dark:border-slate-700 hover:border-sky-400 px-2 py-1"
                onclick="copyCode('sql-old','copied-old', this)">Copy</button>

        <pre id="sql-old" class="overflow-x-auto rounded-xl border border-slate-800 bg-slate-900 text-slate-100 p-4 text-sm leading-6 font-mono">
TRUNCATE TABLE account;
ALTER TABLE account AUTO_INCREMENT = 1000000;
TRUNCATE TABLE account_pwd;
TRUNCATE TABLE account_old;
TRUNCATE TABLE cq_ad_log;
TRUNCATE TABLE cq_addresslist;
TRUNCATE TABLE cq_advert_log;
TRUNCATE TABLE cq_building;
TRUNCATE TABLE cq_card;
TRUNCATE TABLE cq_card2;
TRUNCATE TABLE cq_card3;
TRUNCATE TABLE cq_castle;
TRUNCATE TABLE cq_castleitem;
TRUNCATE TABLE cq_castlemap;
TRUNCATE TABLE cq_deluser;
TRUNCATE TABLE cq_donation_dynasort_rec;
TRUNCATE TABLE cq_enemy;
TRUNCATE TABLE cq_eudemon;
TRUNCATE TABLE cq_family;
TRUNCATE TABLE cq_family_attr;
TRUNCATE TABLE cq_flower;
TRUNCATE TABLE cq_friend;
TRUNCATE TABLE cq_ip_log;
TRUNCATE TABLE cq_item;
TRUNCATE TABLE cq_leaveword;
TRUNCATE TABLE cq_magic;
TRUNCATE TABLE cq_partner;
TRUNCATE TABLE cq_pet;
TRUNCATE TABLE cq_pk_item;
TRUNCATE TABLE cq_shortcut_key;
TRUNCATE TABLE cq_skill;
TRUNCATE TABLE cq_special_status;
TRUNCATE TABLE cq_suspicion_event;
TRUNCATE TABLE cq_suspicion_log;
TRUNCATE TABLE cq_suspicion_punish;
TRUNCATE TABLE cq_synattr;
TRUNCATE TABLE cq_syndicate;
TRUNCATE TABLE cq_taskdetail;
TRUNCATE TABLE cq_totem_add;
TRUNCATE TABLE cq_tutor;
TRUNCATE TABLE cq_tutor_contributions;
TRUNCATE TABLE cq_tutorexp;
TRUNCATE TABLE cq_user;
ALTER TABLE cq_user AUTO_INCREMENT = 1000000;

-- Legion War
REPLACE INTO `cq_dynanpc` VALUES (21150, 0, 2, 'LegionPole', 10, 9800, 0000, 0000, -1, 1100, 473, 614, 8410410, 0000, 0000, 0000, 0000, 0000, 0000, 0000, 805987127, 0, 0, 1000, 'None', 8410450, 66000000, 66000000, 0000, 17, 0000, 0003, 0003, 0003, 0003, 0, 0, 'None', 'None', 0, 0, 0, 0, 0, 0, 0, 0);
REPLACE INTO `cq_dynanpc` VALUES (21151, 0, 2, 'LegionShield', 124, 9837, 0000, 0000, -1, 1100, 461, 269, 0000, 0000, 0000, 0000, 0000, 0000, 0000, 0000, 10000000, 0, 0, 1000, 'None', 8410460, 207000000, 207000000, 0000, 17, 0000, 0003, 0003, 0003, 0003, 0, 0, 'None', 'None', 0, 0, 0, 0, 0, 0, 0, 0);

-- Castle
REPLACE INTO `cq_dynanpc` VALUES (51182, 0, 0, 'CastleMap', 48, 99900, 0000, 0000, -1, 0600, 97, 105, 3800900, 0000, 0000, 0000, 0000, 0000, 0000, 0000, 0, 0, 0, 0, 'None', 0000, 0000, 0000, 0000, 01, 0000, 0000, 0000, 0000, 0000, 0, 0, 'None', 'Castle', 1000000, 0, 0, 12, 0, 0, 0, 0);
REPLACE INTO `cq_dynanpc` VALUES (51183, 0, 0, 'CastleMap', 48, 99900, 0000, 0000, -1, 0600, 97, 112, 3800900, 0000, 0000, 0000, 0000, 0000, 0000, 0000, 0, 0, 0, 0, 'None', 0000, 0000, 0000, 0000, 01, 0000, 0000, 0000, 0000, 0000, 0, 0, 'None', 'Castle', 1000000, 0, 0, 12, 0, 0, 0, 0);
REPLACE INTO `cq_dynanpc` VALUES (51184, 0, 0, 'CastleMap', 48, 99900, 0000, 0000, -1, 0600, 101, 105, 3800900, 0000, 0000, 0000, 0000, 0000, 0000, 0000, 0, 0, 0, 0, 'None', 0000, 0000, 0000, 0000, 01, 0000, 0000, 0000, 0000, 0000, 0, 0, 'None', 'Castle', 1000000, 0, 0, 12, 0, 0, 0, 0);
... (remaining REPLACE rows unchanged) ...
</pre>
      </div>
    </section>

    <!-- New DB Section -->
    <section class="mt-8 rounded-xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-5">
      <h3 class="text-lg font-semibold border-l-4 border-sky-500 pl-3">üíæ New Database Structure</h3>
      <p class="mt-2 text-sm text-slate-600 dark:text-slate-400">For EO server with <code class="font-mono">cq_user_new</code>, <code class="font-mono">cq_vip</code>, <code class="font-mono">othercard</code>, etc. Reset auto-increment for main tables as needed.</p>

      <div class="relative mt-4">
        <span id="copied-new" class="pointer-events-none absolute top-2 right-24 hidden rounded-md bg-emerald-600 text-white text-xs px-2 py-1">Copied!</span>
        <button class="absolute top-2 right-2 text-xs rounded-md border border-slate-700/70 dark:border-slate-700 hover:border-sky-400 px-2 py-1"
                onclick="copyCode('sql-new','copied-new', this)">Copy</button>

        <pre id="sql-new" class="overflow-x-auto rounded-xl border border-slate-800 bg-slate-900 text-slate-100 p-4 text-sm leading-6 font-mono">
-- account table
TRUNCATE TABLE account;
TRUNCATE TABLE account_pwd;
TRUNCATE TABLE cq_vip;
ALTER TABLE account AUTO_INCREMENT = 1000000;
-- main table
TRUNCATE TABLE cq_activitynewshoprecord;
TRUNCATE TABLE cq_delcount;
TRUNCATE TABLE cq_deluser;
TRUNCATE TABLE cq_donation_dynasort_rec;
TRUNCATE TABLE cq_enemy;
TRUNCATE TABLE cq_eudemon;
TRUNCATE TABLE cq_eudlookinfo;
TRUNCATE TABLE cq_faceinfo;
TRUNCATE TABLE cq_friend;
TRUNCATE TABLE cq_goddess;
TRUNCATE TABLE cq_goddessservant;
TRUNCATE TABLE cq_hairinfo;
TRUNCATE TABLE cq_item;
TRUNCATE TABLE cq_magic;
TRUNCATE TABLE cq_mailinfo;
TRUNCATE TABLE cq_newcard;
TRUNCATE TABLE cq_newcard2;
TRUNCATE TABLE cq_newtaskdetail;
TRUNCATE TABLE cq_packpetinfo;
TRUNCATE TABLE cq_partner;
TRUNCATE TABLE cq_skill;
TRUNCATE TABLE cq_special_status;
TRUNCATE TABLE cq_suspicion_event;
TRUNCATE TABLE cq_suspicion_log;
TRUNCATE TABLE cq_suspicion_punish;
TRUNCATE TABLE cq_syndicate;
TRUNCATE TABLE cq_synattr;
TRUNCATE TABLE cq_taskdetail;
TRUNCATE TABLE cq_titleid;
TRUNCATE TABLE cq_totem_add;
TRUNCATE TABLE cq_tutor;
TRUNCATE TABLE cq_tutor_contributions;
TRUNCATE TABLE cq_tutorexp;
TRUNCATE TABLE cq_user_new;
TRUNCATE TABLE othercard;
TRUNCATE TABLE othercard_log;
ALTER TABLE cq_user_new AUTO_INCREMENT = 1000000;

-- Celebrity Hall Statue
UPDATE cq_npc
SET
  data1 = 0, data2 = 0, data3 = 0,
  newdata1 = 0, newdata2 = 0, newdata3 = 0,
  newdata4 = 0, newdata5 = 0, newdata6 = 0,
  newdata7 = 0, newdata8 = 0,
  datastr = ''
WHERE (id BETWEEN 11000 AND 11199 OR id BETWEEN 10200 AND 10999);

-- PK Statue
UPDATE cq_npc
SET
  data1 = 0, data2 = 0, data3 = 0,
  newdata1 = 0, newdata2 = 0, newdata3 = 0,
  newdata6 = 0, newdata7 = 0,
  datastr = ''
WHERE id = 12850;

-- Divine Fire Statue
UPDATE cq_npc
SET
  data1 = 0, data2 = 0, data3 = 0,
  newdata1 = 0, newdata2 = 0, newdata3 = 0,
  newdata4 = 0, newdata6 = 0, newdata7 = 0, newdata8 = 0,
  datastr = '', newstrdata1 = '', newstrdata2 = ''
WHERE id BETWEEN 12116 AND 12118;

REPLACE INTO `cq_dynanpc` VALUES (21150, 0, 2, 'Legion~Pole', 10, 9800, 0000, 0000, -1, 1100, 473, 614, 8410410, 0000, 0000, 0000, 0000, 0000, 0000, 0000, 1566716339, 0, 0, 1000, 'none', 8410450, 247125255, 247125255, 0000, 17, 0000, 0003, 0003, 0003, 0003, 0, 0, 'none', 'none', 0, 0, 0, 0, 0, 0, 0, 0, 0, '', 0, 0, 0, 0, 0, 0, 0, 0, '', '', 0);
REPLACE INTO `cq_dynanpc` VALUES (21151, 0, 2, 'Legion~Shield', 124, 9837, 0000, 0000, -1, 1100, 461, 269, 0000, 0000, 0000, 0000, 0000, 0000, 0000, 0000, 0, 0, 0, 1000, 'none', 8410460, 741375765, 741375765, 0000, 17, 0000, 0003, 0003, 0003, 0003, 0, 0, 'none', 'none', 0, 0, 0, 0, 0, 0, 0, 0, 0, '', 0, 0, 0, 0, 0, 0, 0, 0, '', '', 0);
</pre>
      </div>
    </section>

  </main>

  <!-- Footer -->
  <footer class="border-t border-slate-200 dark:border-slate-800">
    <div class="mx-auto max-w-[1080px] w-full px-4 md:px-6 lg:px-8">
      <div class="py-6 text-center text-sm text-slate-500">
        ¬© <span id="year"></span> DuaSelipar Dev Hub. Powered by
        <a href="https://github.com/duaselipar/duaselipar.github.io" target="_blank" class="underline decoration-dotted hover:text-sky-600">GitHub Pages</a>.
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // Theme toggle
    document.getElementById('themeToggle')?.addEventListener('click', () => {
      const root = document.documentElement;
      const isDark = root.classList.toggle('dark');
      try { localStorage.setItem('theme', isDark ? 'dark' : 'light'); } catch(e){}
    });

    // Copy helper
    function copyCode(preId, badgeId, btn){
      const el = document.getElementById(preId);
      const badge = document.getElementById(badgeId);
      if(!el) return;
      const text = el.innerText || el.textContent || '';
      navigator.clipboard.writeText(text).then(()=>{
        // Show "Copied!" badge & temporary button text
        if(badge){ badge.classList.remove('hidden'); setTimeout(()=>badge.classList.add('hidden'), 1200); }
        if(btn){ const t = btn.textContent; btn.textContent='Copied!'; setTimeout(()=>btn.textContent=t, 1200); }
      });
    }

    // Year
    document.getElementById('year').textContent = new Date().getFullYear();
  </script>
</body>
</html>
