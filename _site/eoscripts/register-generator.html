<!doctype html>
<html lang="en" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="theme-color" content="#ffffff"/>
  <title>üõ°Ô∏è Register Account Tool</title>
  <meta name="description" content="Generate salted-MD5 SQL for Eudemon/CrazyTao/Zero account register.">

  <!-- 100% Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    // Tailwind config (dark mode + Inter)
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: { sans: ['Inter','ui-sans-serif','system-ui','Segoe UI','Roboto','Helvetica','Arial'] }
        }
      }
    }
  </script>

  <!-- Prevent theme flash -->
  <script>
    (function(){
      try{
        const t = localStorage.getItem('theme');
        if (t === 'dark') document.documentElement.classList.add('dark');
        else if (t === 'light') document.documentElement.classList.remove('dark');
        else if (window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches){
          document.documentElement.classList.add('dark');
        }
      }catch(e){}
    })();
  </script>
</head>
<body class="bg-white text-slate-800 dark:bg-slate-950 dark:text-slate-100 antialiased">

  <!-- Header -->
  <header class="sticky top-0 z-40 bg-white/70 dark:bg-slate-950/70 backdrop-blur border-b border-slate-200/70 dark:border-slate-800/70">
    <div class="mx-auto max-w-[1080px] w-full px-4 md:px-6 lg:px-8">
      <div class="h-14 flex items-center justify-between">
        <h1 class="text-base md:text-lg font-extrabold tracking-tight">üõ°Ô∏è Register Account Tool</h1>
        <div class="flex items-center gap-2">
          <a href="/" class="hidden sm:inline-block text-sm font-semibold px-3 py-2 rounded-lg hover:bg-slate-950/5 dark:hover:bg-white/5">Home</a>
          <!-- Theme toggle -->
          <button id="themeToggle" class="inline-flex items-center justify-center h-9 w-9 rounded-lg ring-1 ring-slate-200 dark:ring-slate-800 hover:bg-slate-950/5 dark:hover:bg-white/5" title="Toggle theme">
            <!-- sun (shows in dark) -->
            <svg class="h-5 w-5 hidden dark:block" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="4"></circle>
              <path d="M12 2v2m0 16v2m10-10h-2M4 12H2m16.95 6.95-1.41-1.41M6.46 6.46 5.05 5.05m13.49 0-1.41 1.41M6.46 17.54l-1.41 1.41"/>
            </svg>
            <!-- moon (shows in light) -->
            <svg class="h-5 w-5 dark:hidden" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"/>
            </svg>
          </button>
        </div>
      </div>
    </div>
  </header>

  <!-- Main -->
  <main class="mx-auto max-w-[1080px] w-full px-4 md:px-6 lg:px-8 py-8 pb-16">
    <!-- Form card -->
    <section class="rounded-2xl border border-slate-200 dark:border-slate-800 bg-white dark:bg-slate-950 p-6">
      <h2 class="text-xl font-semibold">Generate SQL</h2>
      <p class="mt-1 text-sm text-slate-600 dark:text-slate-400">Salted MD5 hash compatible with Eudemons/CrazyTao/Zero Online (custom salt).</p>

      <form class="mt-5 grid gap-4" onsubmit="event.preventDefault(); generateQuery();">
        <div>
          <label for="login" class="block text-sm font-semibold">Username</label>
          <input id="login" type="text" required autocomplete="off" spellcheck="false"
                 class="mt-1 w-full rounded-lg ring-1 ring-slate-200 dark:ring-slate-800 bg-white dark:bg-slate-950 px-3 py-2 text-sm focus:outline-none focus:ring-2 focus:ring-sky-500"/>
        </div>

        <div>
          <label for="password" class="block text-sm font-semibold">Password</label>
          <div class="relative">
            <input id="password" type="password" required
                   class="mt-1 w-full rounded-lg ring-1 ring-slate-200 dark:ring-slate-800 bg-white dark:bg-slate-950 px-3 py-2 pr-10 text-sm focus:outline-none focus:ring-2 focus:ring-sky-500"/>
            <button type="button" id="togglePassword"
                    class="absolute inset-y-0 right-2 flex items-center text-slate-500 hover:text-slate-700 dark:hover:text-slate-300">
              üëÅ
            </button>
          </div>
        </div>

        <script>
          const toggle = document.getElementById("togglePassword");
          const pwd = document.getElementById("password");
          toggle.addEventListener("click", () => {
            const type = pwd.getAttribute("type") === "password" ? "text" : "password";
            pwd.setAttribute("type", type);
          });
        </script>

        <div class="flex items-center gap-2">
          <button type="submit"
                  class="inline-flex items-center gap-2 rounded-lg bg-emerald-500 px-4 py-2 text-sm font-semibold text-slate-900 shadow-sm hover:bg-emerald-400 transition">
            Generate SQL Query
          </button>
          <button type="button" onclick="clearForm()"
                  class="inline-flex items-center gap-2 rounded-lg ring-1 ring-slate-200 dark:ring-slate-800 px-4 py-2 text-sm font-semibold hover:bg-slate-950/5 dark:hover:bg-white/5 transition">
            Clear
          </button>
        </div>
      </form>

      <!-- Result panel -->
      <div id="output" class="hidden mt-6 rounded-xl border border-emerald-200/70 dark:border-emerald-800/50 bg-emerald-50/60 dark:bg-emerald-900/20 p-4">
        <p class="text-sm font-semibold text-emerald-900 dark:text-emerald-100">üì• SQL Query:</p>

        <div class="relative mt-3">
          <span id="copied-badge" class="pointer-events-none absolute top-2 right-24 hidden rounded-md bg-emerald-600 text-white text-xs px-2 py-1">Copied!</span>
          <button class="absolute top-2 right-2 text-xs rounded-md border border-slate-700/70 dark:border-slate-700 hover:border-sky-400 px-2 py-1"
                  onclick="copyOutput(this)">Copy</button>

          <pre class="overflow-x-auto rounded-xl border border-slate-800 bg-slate-900 text-slate-100 p-4 text-sm leading-6"><code id="sqlResult" class="font-mono"></code></pre>
        </div>

        <p class="mt-2 text-xs text-slate-500 dark:text-slate-400">
          Note: Ensure your schema matches. Eudemons/Zero/CrazyTao: <code class="font-mono">account(name,password)</code>.
          CrazyTao Only: <code class="font-mono">account.tbloguin(UserName,passwd)</code>.
        </p>
      </div>
    </section>
  </main>

  <!-- Footer -->
  <footer class="border-t border-slate-200 dark:border-slate-800">
    <div class="mx-auto max-w-[1080px] w-full px-4 md:px-6 lg:px-8">
      <div class="py-6 text-center text-sm text-slate-500">
        ¬© <span id="year"></span> DuaSelipar Dev Hub. Powered by
        <a href="https://github.com/duaselipar/duaselipar.github.io" target="_blank" class="underline decoration-dotted hover:text-sky-600">GitHub Pages</a>.
      </div>
    </div>
  </footer>

  <!-- Scripts -->
  <script>
    // Theme toggle
    document.getElementById('themeToggle')?.addEventListener('click', () => {
      const root = document.documentElement;
      const isDark = root.classList.toggle('dark');
      try { localStorage.setItem('theme', isDark ? 'dark' : 'light'); } catch(e){}
    });
    document.getElementById('year').textContent = new Date().getFullYear();

    // Simple SQL escaper for single quotes
    function sqlEscapeSingleQuotes(s){ return String(s).replace(/'/g, "''"); }

    // Generate salted MD5 like EO (keep salts EXACT)
    function GenMD5(txtPassword){
      var a = txtPassword;
      var b = "\xa3\xac\xa1\xa3";
      var c = "fdjf,jkgfkl";
      var s = a + b + c;
      return MD5(s);
    }

    function generateQuery(){
      const login = document.getElementById('login').value.trim();
      const password = document.getElementById('password').value;
      if(!login || !password) return;

      const hash = GenMD5(password);

      // EO/Eudemons insert
      const line1 = `insert into account (name,password) values ('${sqlEscapeSingleQuotes(login)}','${hash}');`;

      // CrazyTao insert (requested)
      const line2 = `-- run this too for CrazyTao account registration\ninsert into account.tbloguin (UserName,passwd) values ('${sqlEscapeSingleQuotes(login)}','${hash}');`;

      const sql = `${line1}\n\n${line2}`;

      document.getElementById('sqlResult').textContent = sql;
      document.getElementById('output').classList.remove('hidden');
    }

    function clearForm(){
      document.getElementById('login').value = '';
      document.getElementById('password').value = '';
      document.getElementById('output').classList.add('hidden');
      document.getElementById('sqlResult').textContent = '';
    }

    function copyOutput(btn){
      const codeText = document.getElementById('sqlResult').textContent || '';
      if(!codeText) return;
      navigator.clipboard.writeText(codeText).then(()=>{
        const badge = document.getElementById('copied-badge');
        if(badge){ badge.classList.remove('hidden'); setTimeout(()=>badge.classList.add('hidden'), 1200); }
        if(btn){ const t = btn.textContent; btn.textContent='Copied!'; setTimeout(()=>btn.textContent=t, 1200); }
      });
    }

    /* ===== MD5 implementation (unchanged) ===== */
    var hex_chr = "0123456789abcdef";
    function rhex(num){ var str=""; for(var j=0;j<=3;j++) str+=hex_chr.charAt((num>>(j*8+4))&0x0F)+hex_chr.charAt((num>>(j*8))&0x0F); return str; }
    function str2blks_MD5(str){ var nblk=((str.length+8)>>6)+1, blks=new Array(nblk*16); for(var i=0;i<nblk*16;i++) blks[i]=0; for(i=0;i<str.length;i++) blks[i>>2]|=str.charCodeAt(i)<<((i%4)*8); blks[i>>2]|=0x80<<((i%4)*8); blks[nblk*16-2]=str.length*8; return blks; }
    function add(x,y){ var lsw=(x&0xFFFF)+(y&0xFFFF); var msw=(x>>16)+(y>>16)+(lsw>>16); return (msw<<16)|(lsw&0xFFFF); }
    function rol(num,cnt){ return (num<<cnt)|(num>>>(32-cnt)); }
    function cmn(q,a,b,x,s,t){ return add(rol(add(add(a,q),add(x,t)),s),b); }
    function ff(a,b,c,d,x,s,t){ return cmn((b&c)|((~b)&d),a,b,x,s,t); }
    function gg(a,b,c,d,x,s,t){ return cmn((b&d)|(c&(~d)),a,b,x,s,t); }
    function hh(a,b,c,d,x,s,t){ return cmn(b^c^d,a,b,x,s,t); }
    function ii(a,b,c,d,x,s,t){ return cmn(c^(b|(~d)),a,b,x,s,t); }
    function MD5(str){
      var x=str2blks_MD5(str); var a=1732584193, b=-271733879, c=-1732584194, d=271733878;
      for(var i=0;i<x.length;i+=16){
        var olda=a, oldb=b, oldc=c, oldd=d;
        a=ff(a,b,c,d,x[i+0],7,-680876936); d=ff(d,a,b,c,x[i+1],12,-389564586);
        c=ff(c,d,a,b,x[i+2],17,606105819); b=ff(b,c,d,a,x[i+3],22,-1044525330);
        a=ff(a,b,c,d,x[i+4],7,-176418897); d=ff(d,a,b,c,x[i+5],12,1200080426);
        c=ff(c,d,a,b,x[i+6],17,-1473231341); b=ff(b,c,d,a,x[i+7],22,-45705983);
        a=ff(a,b,c,d,x[i+8],7,1770035416); d=ff(d,a,b,c,x[i+9],12,-1958414417);
        c=ff(c,d,a,b,x[i+10],17,-42063); b=ff(b,c,d,a,x[i+11],22,-1990404162);
        a=ff(a,b,c,d,x[i+12],7,1804603682); d=ff(d,a,b,c,x[i+13],12,-40341101);
        c=ff(c,d,a,b,x[i+14],17,-1502002290); b=ff(b,c,d,a,x[i+15],22,1236535329);
        a=gg(a,b,c,d,x[i+1],5,-165796510); d=gg(d,a,b,c,x[i+6],9,-1069501632);
        c=gg(c,d,a,b,x[i+11],14,643717713); b=gg(b,c,d,a,x[i+0],20,-373897302);
        a=gg(a,b,c,d,x[i+5],5,-701558691); d=gg(d,a,b,c,x[i+10],9,38016083);
        c=gg(c,d,a,b,x[i+15],14,-660478335); b=gg(b,c,d,a,x[i+4],20,-405537848);
        a=gg(a,b,c,d,x[i+9],5,568446438); d=gg(d,a,b,c,x[i+14],9,-1019803690);
        c=gg(c,d,a,b,x[i+3],14,-187363961); b=gg(b,c,d,a,x[i+8],20,1163531501);
        a=gg(a,b,c,d,x[i+13],5,-1444681467); d=gg(d,a,b,c,x[i+2],9,-51403784);
        c=gg(c,d,a,b,x[i+7],14,1735328473); b=gg(b,c,d,a,x[i+12],20,-1926607734);
        a=hh(a,b,c,d,x[i+5],4,-378558); d=hh(d,a,b,c,x[i+8],11,-2022574463);
        c=hh(c,d,a,b,x[i+11],16,1839030562); b=hh(b,c,d,a,x[i+14],23,-35309556);
        a=hh(a,b,c,d,x[i+1],4,-1530992060); d=hh(d,a,b,c,x[i+4],11,1272893353);
        c=hh(c,d,a,b,x[i+7],16,-155497632); b=hh(b,c,d,a,x[i+10],23,-1094730640);
        a=hh(a,b,c,d,x[i+13],4,681279174); d=hh(d,a,b,c,x[i+0],11,-358537222);
        c=hh(c,d,a,b,x[i+3],16,-722521979); b=hh(b,c,d,a,x[i+6],23,76029189);
        a=hh(a,b,c,d,x[i+9],4,-640364487); d=hh(d,a,b,c,x[i+12],11,-421815835);
        c=hh(c,d,a,b,x[i+15],16,530742520); b=hh(b,c,d,a,x[i+2],23,-995338651);
        a=ii(a,b,c,d,x[i+0],6,-198630844); d=ii(d,a,b,c,x[i+7],10,1126891415);
        c=ii(c,d,a,b,x[i+14],15,-1416354905); b=ii(b,c,d,a,x[i+5],21,-57434055);
        a=ii(a,b,c,d,x[i+12],6,1700485571); d=ii(d,a,b,c,x[i+3],10,-1894986606);
        c=ii(c,d,a,b,x[i+10],15,-1051523); b=ii(b,c,d,a,x[i+1],21,-2054922799);
        a=ii(a,b,c,d,x[i+8],6,1873313359); d=ii(d,a,b,c,x[i+15],10,-30611744);
        c=ii(c,d,a,b,x[i+6],15,-1560198380); b=ii(b,c,d,a,x[i+13],21,1309151649);
        a=ii(a,b,c,d,x[i+4],6,-145523070); d=ii(d,a,b,c,x[i+11],10,-1120210379);
        c=ii(c,d,a,b,x[i+2],15,718787259); b=ii(b,c,d,a,x[i+9],21,-343485551);
        a=add(a,olda); b=add(b,oldb); c=add(c,oldc); d=add(d,oldd);
      }
      return rhex(a)+rhex(b)+rhex(c)+rhex(d);
    }
  </script>
</body>
</html>
